---
import type { CollectionEntry } from 'astro:content';

import Card from './Card.astro';

interface Props {
    translation: CollectionEntry<'translation'>;
}

const { translation } = Astro.props;
const { title, author, publication, year, description, linkUrl, poems } = translation.data;
---

<Card>
    <div class="translation-wrapper">
        <div class="translation-meta">
            <h3 class="translation-title">
                {
                    linkUrl ? (
                        <a href={linkUrl} target="_blank" rel="noopener noreferrer">
                            {title}
                        </a>
                    ) : (
                        title
                    )
                }
            </h3>
            <p class="translation-details">
                <span class="translation-author">by {author}</span>.
                {(publication || year) && <span class="publication-details">{[publication, year].filter(Boolean).join(', ')}</span>}
            </p>
            {description && <p class="translation-description">{description}</p>}
        </div>
        {
            poems && poems.length > 0 && (
                <ul class="poems-list">
                    {poems.map((poem) => (
                        <li>
                            {poem.linkUrl ? (
                                <a href={poem.linkUrl} target="_blank" rel="noopener noreferrer">
                                    {poem.title}
                                </a>
                            ) : (
                                poem.title
                            )}
                        </li>
                    ))}
                </ul>
            )
        }
    </div>
</Card>

<style>
    .translation-meta {
        display: flex;
        flex-direction: column;

        h3 {
            margin-block-end: 0;
            line-height: 1.1;
        }
    }

    .translation-author {
        font-style: italic;
    }

    .translation-description {
        margin-block-start: var(--spacing-200);
    }

    .poems-list {
        list-style: 'â€“' inside;
    }
</style>
